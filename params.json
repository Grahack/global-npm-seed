{"name":"Global-npm-seed","tagline":"Learn to create a global npm module with a CLI interface.","body":"# Global NPM Seed Project\r\n\r\nThis is a tutorial and a template for creating your own CLI with node! You can also checkout the [final npm module](https://npmjs.org/package/global-npm-seed).\r\n\r\n## Getting Setup\r\n\r\nMake sure that you have node and npm installed.\r\n\r\nStart by creating an empty directory and navigate to it in your terminal. Run ```npm init``` which will ask you a couple of questions about the module that you are building such as name, versions, repository and author. You can use the default values for all of these, or enter some real data if you want.\r\n\r\nOnce it has all the information, it will compile it into *package.json*. *package.json* holds other data and metadata to identify and install your module.\r\n\r\n## Modifying Package.json\r\n\r\nWe need to make a couple of changes to *package.json* to get started.\r\n\r\n### Prefer Global\r\n\r\nThe first property to add is ```preferGlobal```. preferGloabl is a handy little property that tell npm this module is intended to be used from the terminal. If a user tries to install the module locally, npm will warn them that the package is intended for global installation.\r\n\r\n```\r\n{\r\n  ...\r\n  \"preferGlobal\": \"true\",\r\n  ...\r\n}\r\n```\r\n\r\n### Directories Property\r\n\r\nThe ```directories``` property is the one that makes this all work. By setting ```directories.bin```, we are telling npm which file or directory contains the files to be added to the system PATH.\r\n\r\nFor this demo, we want users to be able to run ```hello``` from the terminal, so I need to create a new directory *bin* and create a file called *hello* in it. Then add the ```directories``` property to *package.json*. Now when our module is installed the user will be able to access ./bin/hello from the terminal.\r\n\r\n```\r\n{\r\n  ...\r\n  \"preferGlobal\": \"true\",\r\n  \"directories\": {\r\n    \"bin\": \"./bin\"\r\n  },\r\n  ...\r\n}\r\n```\r\n\r\n## Our \"Main\" File\r\n\r\nCreate a directory called *lib* in your modules folder, and create *hello.js* inside of it. This file is going to contain all of our functionality. For now, it will display \"Hello World!\".\r\n\r\n### ./lib/hello.js\r\n```\r\nconsole.log('Hello World!');\r\n```\r\n\r\nWe have our file ready to go, we still need to link the terminal and this file by modifying *./bin/hello*\r\n\r\n## Linking\r\n\r\nThis is the file that is going to be executed by our terminal. We need it to do two things:\r\n\r\n1. Use a shebang to parse the contents as node.js code\r\n2. Execute the contents of *./lib/hello.js*\r\n\r\n### ./bin/hello\r\n```\r\n#!/usr/bin/env node\r\nrequire('./../lib/hello.js');\r\n```\r\n\r\nLine one is a [shebang][1]. Line two is a require statement that requires our main file which will be executed. We now have all the pieces in place to test our CLI.\r\n\r\n## Installing Your Module\r\n\r\nNavigate to your projects root directory, and exectute:\r\n\r\n```\r\nnpm install -g ./\r\n```\r\n\r\nThis is telling npm to install the module location in the current directory as a global module, which is exactly what we want. ```-g``` is a flag that specifies that the module should be installed globally.\r\n\r\nNow you can test the module by running\r\n```\r\n> hello\r\nHello World!\r\n```\r\n\r\n## Adding Support For Arguments\r\n\r\nOur module is cool, but lets add a optional command-line argument to personalize the greeting. Adding support for --name=myname will do just that.\r\n\r\nTo do this, we are going to add a dependency to *package.json*. You can run ```npm install --save optimist``` to install the module and add it as a dependency.\r\n\r\n### package.json (veresion number may vary)\r\n```\r\n{\r\n  ...\r\n  \"dependencies\": {\r\n    \"optimist\": \"~0.3.5\"\r\n  }\r\n  ...\r\n}\r\n```\r\n\r\n[Optimist](https://github.com/substack/node-optimist) is a node module that helps parse command-line arguments. Now that it is included in out dependencies, npm will install optimist whenever somebody installs our module.\r\n\r\n### Modifying ./lib/hello.js\r\n\r\nIn our main file, we now need to parse the command-line arguments.\r\n\r\n### ./lib/hello.js\r\n```\r\nvar argv = require('optimist').argv;\r\n\r\nconosle.log('Hello ' + (argv.name || 'World') + '!');\r\n```\r\n\r\nNow we check to see if the user provided a name. If they did, we greet them with their name, else we greet them with our generic message.\r\n\r\n### Reinstalling\r\n\r\nRun ```npm install -g ./``` to reinstall the module. This time, optimist is also going to be installed. Now you should be able to run hello with the name argument.\r\n\r\n```\r\n> hello\r\nHello World!\r\n```\r\n```\r\n> hello --name=Andrew\r\nHello Andrew!\r\n```\r\n\r\n## Questions?\r\n\r\nIf you have a question, open an issue. I would love to help you setup your first command-line interface!\r\n\r\n[1]: http://en.wikipedia.org/wiki/Shebang_(Unix)\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}